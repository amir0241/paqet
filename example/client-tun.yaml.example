# paqet Client Configuration Example - TUN Mode
# This configuration creates a virtual network interface tunnel between two servers.
# All buffer sizes are auto-tuned from CPU count and RAM at startup.
role: "client"

# Logging configuration
log:
  level: "info"  # none, debug, info, warn, error, fatal

# TUN interface configuration (alternative to SOCKS5)
# This creates a virtual network interface that can be used for IP routing
tun:
  enabled: true              # Enable TUN mode
  name: "tun0"               # TUN device name (default: tun0)
  addr: "10.0.8.1/24"        # CHANGE ME: Client TUN IP address in CIDR notation
  mtu: 1400                  # MTU size (default: 1500, reduce if experiencing issues)

# Network interface settings (for the physical interface)
network:
  interface: "en0"                          # CHANGE ME: Network interface (en0, eth0, wlan0, etc.)
  # guid: "\Device\NPF_{...}"               # Windows only (Npcap).

  # IPv4 configuration
  ipv4:
    addr: "192.168.1.100:0"                 # CHANGE ME: Local IP (use port 0 for random port)
    router_mac: "aa:bb:cc:dd:ee:ff"         # CHANGE ME: Gateway/router MAC address

  tcp:
    local_flag: ["PA"]                      # Local TCP flags (Push+Ack default)
    remote_flag: ["PA"]                     # Remote TCP flags (Push+Ack default)

# Server connection settings
server:
  addr: "10.0.0.100:9999"  # CHANGE ME: paqet server address and port

# Transport protocol configuration
# tunbuf, tcpbuf, and udpbuf are auto-tuned from CPU count — no need to set them.
transport:
  protocol: "kcp"  # Transport protocol: "kcp" or "quic"
  conn: 1          # Number of connections (1-256, default: 1)

  # Override buffer sizes only if needed:
  # tunbuf: 262144  # auto: cpus×64 KB, e.g. 256 KB on 4 cores
  # tcpbuf: 65536   # auto: cpus×16 KB, e.g. 64 KB on 4 cores
  # udpbuf: 16384   # auto: cpus×4 KB,  e.g. 16 KB on 4 cores

  # KCP protocol settings
  kcp:
    mode: "fast"              # KCP mode: normal, fast, fast2, fast3, manual
    key: "your-secret-key-here"       # CHANGE ME: Secret key (must match server)

    # KCP window/buffer sizes are auto-tuned from CPU count — override only if needed:
    # rcvwnd: 8192            # auto: cpus×2048
    # sndwnd: 8192            # auto: cpus×2048
    # smuxbuf: 4194304        # auto: cpus×1 MB
    # streambuf: 4194304      # auto: cpus×1 MB

# Usage Instructions:
# 1. Start the server first with matching configuration
# 2. Start the client - it will create a tun0 interface with IP 10.0.8.1
# 3. On the server side, a tun0 interface will be created with IP 10.0.8.2
# 4. You can now ping between servers: ping 10.0.8.2 (from client) or ping 10.0.8.1 (from server)
# 5. To route traffic through the tunnel, add routes:
#    - Linux: sudo ip route add 10.0.9.0/24 via 10.0.8.2 dev tun0
#    - macOS: sudo route add -net 10.0.9.0/24 10.0.8.2
