# paqet Server Configuration Example with QUIC
# All QUIC stream limits, flow-control windows, and performance settings are
# auto-tuned from CPU count and RAM at startup — you do not need to set them.
role: "server"

# Logging configuration
log:
  level: "info"  # none, debug, info, warn, error, fatal

# Server listen configuration
listen:
  addr: ":9999"   # CHANGE ME: Server listen port (must match network.ipv4.addr port)

# Network interface settings
network:
  interface: "eth0"                          # CHANGE ME: Network interface (eth0, ens3, en0, etc.)
  # guid: "\Device\NPF_{...}"                # Windows only (Npcap).

  # IPv4 configuration
  ipv4:
    addr: "10.0.0.100:9999"                  # CHANGE ME: Server IPv4 and port (port must match listen.addr)
    router_mac: "aa:bb:cc:dd:ee:ff"          # CHANGE ME: Gateway/router MAC address

  # TCP flags for packet crafting
  tcp:
    local_flag: ["PA"]                       # Local TCP flags (Push+Ack default)

# Transport protocol configuration — QUIC
# Buffer sizes (tcpbuf, udpbuf) are auto-tuned from CPU count.
transport:
  protocol: "quic"
  conn: 1           # Number of connections (1-256, default: 1)

  quic:
    # Server auto-generates a self-signed TLS certificate — no TLS config needed here.

    # All QUIC settings are auto-tuned.  Override only if needed:
    # max_idle_timeout: 60              # seconds (auto: 60s server)
    # max_incoming_streams: 50000       # auto: cpus×12500, e.g. 50000 on 4 cores
    # max_incoming_uni_streams: 50000   # same formula
    # keep_alive_period: 15             # seconds (auto: 15)
    # initial_stream_receive_window: 10485760      # 10 MB  (auto: 10 MB server)
    # max_stream_receive_window: 41943040          # 40 MB  (auto: 40 MB server)
    # initial_connection_receive_window: 31457280  # 30 MB  (auto: 30 MB server)
    # max_connection_receive_window: 104857600     # 100 MB (auto: 100 MB server)
    # enable_0rtt: true

# Important: Server Firewall Configuration Required!
# 
# Since paqet uses pcap to bypass standard firewalls, you MUST configure
# iptables on the server to prevent kernel interference:
#
# sudo iptables -t raw -A PREROUTING -p tcp --dport 9999 -j NOTRACK
# sudo iptables -t raw -A OUTPUT -p tcp --sport 9999 -j NOTRACK  
# sudo iptables -t mangle -A OUTPUT -p tcp --sport 9999 --tcp-flags RST RST -j DROP
#
# Replace 9999 with your actual listen port.
