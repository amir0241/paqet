# paqet Client Configuration Example
# Role must be explicitly set
role: "client"

# Logging configuration
log:
  level: "info"  # none, debug, info, warn, error, fatal

# SOCKS5 proxy configuration (client mode)
socks5:
  - listen: "127.0.0.1:1080"    # SOCKS5 proxy listen address
    username: ""                # Optional SOCKS5 authentication
    password: ""                # Optional SOCKS5 authentication

# Port forwarding configuration (can be used alongside SOCKS5)
# forward:
#   - listen: "127.0.0.1:8080"  # Local port to listen on
#     target: "127.0.0.1:80"    # Target to forward to (via server)
#     protocol: "tcp"           # Protocol (tcp/udp)

# Network interface settings
network:
  interface: "en0"                          # CHANGE ME: Network interface (en0, eth0, wlan0, etc.)
  # guid: "\Device\NPF_{...}"               # Windows only (Npcap).

  # IPv4 configuration
  ipv4:
    addr: "192.168.1.100:0"                 # CHANGE ME: Local IP (use port 0 for random port)
    router_mac: "aa:bb:cc:dd:ee:ff"         # CHANGE ME: Gateway/router MAC address

  # IPv6 configuration (optional)
  # ipv6:
  #   addr: "[2001:db8::1]:0"               # CHANGE ME: Local IPv6 address and port
  #   router_mac: "aa:bb:cc:dd:ee:ff"       # CHANGE ME: Gateway/router MAC address for IPv6

  tcp:
    local_flag: ["PA"]                      # Local TCP flags (Push+Ack default)
    remote_flag: ["PA"]                     # Remote TCP flags (Push+Ack default)

  # PCAP settings — all auto-tuned from RAM/CPU; override only if needed.
  # pcap:
  #   sockbuf: 16777216          # Socket buffer in bytes (auto: nextPow2(RAM/512 MB) MB, e.g. 16 MB on 8 GB)
  #   send_queue_size: 30000     # Send queue slots (auto: cpus×7500, e.g. 30000 on 4 cores)
  #   max_retries: 3
  #   initial_backoff_ms: 10
  #   max_backoff_ms: 1000

# Server connection settings
server:
  addr: "10.0.0.100:9999"  # CHANGE ME: paqet server address and port

# Transport protocol configuration
# Buffer sizes (tcpbuf, udpbuf, tunbuf) are auto-tuned from CPU count — no need to set them.
transport:
  protocol: "kcp"  # Transport protocol: "kcp" or "quic"
  conn: 1          # Number of connections (1-256, default: 1)

  # Override buffer sizes only if you need to deviate from auto-tuned values:
  # tcpbuf: 65536   # auto: cpus×16 KB, e.g. 64 KB on 4 cores
  # udpbuf: 16384   # auto: cpus×4 KB,  e.g. 16 KB on 4 cores

  # KCP protocol settings (used when protocol: "kcp")
  kcp:
    mode: "fast"              # KCP mode: normal, fast, fast2, fast3, manual

    # Manual mode parameters (only used when mode="manual")
    # nodelay: 1              # 0=disable (TCP-like), 1=enable (lower latency, aggressive retransmit)
    # interval: 10            # Update timer in milliseconds (lower = more responsive, higher CPU)
    # resend: 2               # Fast retransmit trigger (0=disabled, 1=aggressive, 2=moderate)
    # nocongestion: 1         # 0=congestion control enabled, 1=disabled (max speed)
    # wdelay: false           # false=flush immediately (low latency), true=batch writes
    # acknodelay: true        # true=send ACKs immediately (lower latency)

    # mtu: 1350               # Maximum transmission unit (50-1500)

    # KCP window/buffer sizes are auto-tuned from CPU count — override only if needed:
    # rcvwnd: 8192            # auto: cpus×2048, e.g. 8192 on 4 cores
    # sndwnd: 8192            # auto: cpus×2048
    # smuxbuf: 4194304        # auto: cpus×1 MB,  e.g. 4 MB on 4 cores
    # streambuf: 4194304      # auto: cpus×1 MB

    # Encryption settings
    # block: "aes"                    # aes, aes-128, aes-128-gcm, aes-192, salsa20, blowfish, twofish, cast5, 3des, tea, xtea, xor, sm4, none, null
    key: "your-secret-key-here"       # CHANGE ME: Secret key (must match server)

  # QUIC protocol settings (used when protocol: "quic")
  # All QUIC stream/window settings are auto-tuned — see client-quic.yaml.example.
  # quic:
  #   insecure_skip_verify: true      # Set true for self-signed certs

# Performance section is fully auto-tuned from CPU count; only override if needed:
# performance:
#   max_concurrent_streams: 10000    # auto: cpus×2500, e.g. 10000 on 4 cores
#   packet_workers: 4                # auto: GOMAXPROCS (capped at 64)
#   stream_worker_pool_size: 5000    # auto: cpus×1250
#   tcp_connection_pool_size: 100    # auto: cpus×25
#   tcp_connection_idle_timeout: 90
#   max_retry_attempts: 5
#   retry_initial_backoff_ms: 100
#   retry_max_backoff_ms: 10000

# Optional Forward Error Correction (FEC) - currently disabled
# Use only for very lossy networks:
#   dshard: 10    # Data shards for FEC
#   pshard: 3     # Parity shards for FEC